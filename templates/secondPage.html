<!DOCTYPE html>
<html>
<head>
    <title> Ïûò ÎèÑÏ∞©ÌñàÏßÄÎ°± üåà </title>
    <style>
        .matrix {
            display: block;
            margin-bottom: 20px;
        }
        .category {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
        }
        .category h3 {
            margin-top: 0;
        }
        .sub-category {
            display: inline-block;
            vertical-align: top;
            width: 45%;
            margin-right: 5%;
        }
        .sub-category:last-child {
            margin-right: 0;
        }
    </style>
</head>
<body>
    <h1> Ïûò ÎèÑÏ∞©ÌñàÏßÄÎ°± üåà </h1>
    <pre>{{ ' - '.join(date_range) }}</pre>

    <div class="matrix">
        <div class="category">
            <h3>Ìï≠Í≥µÍ∂å</h3>
            <div class="sub-category", name="Ìï≠Í≥µÍ∂å_to">
                <h4>Í∞ÄÎäî Ìé∏</h4>
                <table>
                    <thead>
                        <tr>
                            <th>ÏÑ†ÌÉù</th>
                            {% for key in data['Ìï≠Í≥µÍ∂å_to'][0].keys() %}
                            <th>{{ key }}</th>
                            {% endfor %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in data['Ìï≠Í≥µÍ∂å_to'] %}
                        <tr>
                            <td>
                                <input type="radio" id="Ìï≠Í≥µÍ∂å_to{{ loop.index }}" name="Ìï≠Í≥µÍ∂å_to" value="{{ item }}">
                            </td>
                            {% for item_value in item.values() %}
                            <td>{{ item_value }}</td>
                            {% endfor %}
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="sub-category", name="Ìï≠Í≥µÍ∂å_from">
                <h4>Ïò§Îäî Ìé∏</h4>
                <table>
                    <thead>
                        <tr>
                            <th>ÏÑ†ÌÉù</th>
                            {% for key in data['Ìï≠Í≥µÍ∂å_from'][0].keys() %}
                            <th>{{ key }}</th>
                            {% endfor %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in data['Ìï≠Í≥µÍ∂å_from'] %}
                        <tr>
                            <td>
                                <input type="radio" id="Ìï≠Í≥µÍ∂å_from{{ loop.index }}" name="Ìï≠Í≥µÍ∂å_from" value="{{ item }}">
                            </td>
                            {% for item_value in item.values() %}
                            <td>{{ item_value }}</td>
                            {% endfor %}
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        <div class="category", name="Ìò∏ÌÖî">
            <h3>ÏàôÎ∞ïÏãúÏÑ§</h3>
            <table>
                <thead>
                    <tr>
                        <th>ÏÑ†ÌÉù</th>
                        {% for key in data['Ìò∏ÌÖî'][0].keys() %}
                        <th>{{ key }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for item in data['Ìò∏ÌÖî'] %}
                    <tr>
                        <td>
                            <input type="radio" id="Ìò∏ÌÖî{{ loop.index }}" name="Ìò∏ÌÖî" value="{{ item }}">
                        </td>
                        {% for item_value in item.values() %}
                        <td>{{ item_value }}</td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="category", name="Î†åÌä∏Ïπ¥">
            <h3>Î†åÌÑ∞Ïπ¥</h3>
            <table>
                <thead>
                    <tr>
                        <th>ÏÑ†ÌÉù</th>
                        {% for key in data['Î†åÌä∏Ïπ¥'][0].keys() %}
                        <th>{{ key }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for item in data['Î†åÌä∏Ïπ¥'] %}
                    <tr>
                        <td>
                            <input type="radio" id="Î†åÌä∏Ïπ¥{{ loop.index }}" name="Î†åÌä∏Ïπ¥" value="{{ item }}">
                        </td>
                        {% for item_value in item.values() %}
                        <td>{{ item_value }}</td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <button class="submit" onclick="submit()">ÏÑ†ÌÉùÏôÑÎ£å</button>

    <form id="myForm" method="get" style="display: none;" action="/3ÌéòÏù¥ÏßÄ">
        <input type="text" name="input_data" id="inputData">
        <input type="text" name="date_range" id="dateRange">
    </form>

    <script>
        function submit() {
            const selectedItems = {};
            var categories = ['Ìï≠Í≥µÍ∂å_to', 'Ìï≠Í≥µÍ∂å_from', 'Ìò∏ÌÖî', 'Î†åÌä∏Ïπ¥'];
            for (var i = 0; i < categories.length; i++) {
                var radios = document.getElementsByName(categories[i]);
                for (var j = 0; j < radios.length; j++) {
                    var radio = radios[j];
                    if (radio.checked) {
                        selectedItems[categories[i]] = radio.value;
                        break;
                    }
                }
            }
            console.log(selectedItems);
            document.getElementById("inputData").value = JSON.stringify(selectedItems);
            document.getElementById("dateRange").value = "{{ date_range }}"
            document.getElementById("myForm").submit();
        }
    </script>
</body>
</html>
