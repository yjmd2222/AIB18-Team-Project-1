<!DOCTYPE html>
<html>
<head>
    <title> ì˜ ë„ì°©í–ˆì§€ë¡± ğŸŒˆ </title>
    <style>
        .matrix {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .category {
            width: 30%;
            padding: 10px;
            border: 1px solid #ccc;
        }
        .category h3 {
            margin-top: 0;
        }
        .sub-category {
            display: inline-block;
            vertical-align: top;
            width: 45%;
            margin-right: 5%;
        }
        .sub-category:last-child {
            margin-right: 0;
        }
    </style>
</head>
<body>
    <h1> ì˜ ë„ì°©í–ˆì§€ë¡± ğŸŒˆ </h1>

    <div class="matrix">
        <div class="category">
            <h3>í•­ê³µê¶Œ</h3>
            <div class="sub-category">
                <h4>ê°€ëŠ” í¸</h4>
                {% for item in data['í•­ê³µê¶Œ_to'] %}
                <input type="radio" id="flightOut{{ loop.index }}" name="flightOut" value="{{ item }}">
                <label for="flightOut{{ loop.index }}">{{ item }}</label><br>
                {% endfor %}
            </div>
            <div class="sub-category">
                <h4>ì˜¤ëŠ” í¸</h4>
                {% for item in data['í•­ê³µê¶Œ_from'] %}
                <input type="radio" id="flightBack{{ loop.index }}" name="flightBack" value="{{ item }}">
                <label for="flightBack{{ loop.index }}">{{ item }}</label><br>
                {% endfor %}
            </div>
        </div>
        <div class="category">
            <h3>ìˆ™ë°•ì‹œì„¤</h3>
            {% for item in data['í˜¸í…”'] %}
            <input type="radio" id="hotel{{ loop.index }}" name="hotel" value="{{ item }}">
            <label for="hotel{{ loop.index }}">{{ item }}</label><br>
            {% endfor %}
        </div>
        <div class="category">
            <h3>ë ŒíŠ¸ì¹´</h3>
            {% for item in data['ë ŒíŠ¸ì¹´'] %}
            <input type="radio" id="rental{{ loop.index }}" name="rental" value="{{ item }}">
            <label for="rental{{ loop.index }}">{{ item }}</label><br>
            {% endfor %}
        </div>
    </div>

    <button class="submit" onclick="submit()">ì„ íƒì™„ë£Œ</button>

    <form id="myForm" method="get" style="display: none;" action="/3í˜ì´ì§€">
        <input type="text" name="input_data" id="inputData">
        <input type="text" name="date_range" id="dateRange">
    </form>

    <script>
        function submit() {
            const selectedItems = {};
            var categories = ['flightOut', 'flightBack', 'hotel', 'rental'];
            for (var i = 0; i < categories.length; i++) {
                var radios = document.getElementsByName(categories[i]);
                for (var j = 0; j < radios.length; j++) {
                    var radio = radios[j];
                    if (radio.checked) {
                        selectedItems[categories[i]] = radio.value;
                        break;
                    }
                }
            }
            console.log(selectedItems);
            document.getElementById("inputData").value = JSON.stringify(selectedItems);
            document.getElementById("dateRange").value = "{{ date_range }}"
            document.getElementById("myForm").submit();
        }
    </script>
</body>
</html>
